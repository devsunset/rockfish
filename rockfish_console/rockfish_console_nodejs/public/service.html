<!DOCTYPE html>
<html>
<head>
    <!-- include head -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1" />
     <title>Rockfish Console</title>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="http://cdno.axisj.com/axicon/axicon.min.css" />
    <link rel="stylesheet" type="text/css" href="http://cdno.axisj.com/axisj/ui/kakao/AXJ.min.css" id="axu-theme-axisj" />
    <script type="text/javascript" src="http://cdno.axisj.com/axisj/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="http://cdno.axisj.com/axisj/dist/AXJ.min.js"></script>
    <link rel="stylesheet" href="ui/cacao-dark/admin.css" id="axu-theme-admin" />
    <link rel="stylesheet" href="ui/custom.css" />
    <script type="text/javascript" src="resource/admin.js"></script>
    <script type="text/javascript" src="resource/Chart.min.js"></script>
    <!-- include head -->
</head>
<body>
<div id="AXPage">
    <!-- ax-header : include -->
    <div class="ax-header">
        <div class="ax-wrap">
            <div class="ax-layer">
                <div class="ax-col-12">
                    <div class="ax-unit">
                        <div class="ax-logo">
                            <a href="dashboard.html"><span class="logo-img"><i><img src="images/logo_32x32.png" style="margin-top:7px"></i></span><span class="logo-txt">Rockfish Console</span></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="ax-layer">
                <div class="ax-col-8">
                    <div class="ax-unit">
                        <!-- 상단 top-down-menu 표시 영역 : s-->
                        <div id="ax-top-menu" class="ax-top-menu AXMenuBox"></div>
                        <!-- e : 상단 top-down-menu 표시 영역 -->
                        <div class="mx-top-menu"><a id="mx-top-menu-handle" class="mx-menu-button"><i class="axi axi-th"></i></a></div>
                    </div>
                </div>
                <div class="ax-col-4">
                    <div class="ax-unit">
                        <ul class="ax-loginfo" id="ax-loginfo">
                            <li class="profile"><div class="photo"></div></li>
                            <li class="account"><a href="#ax" id="rockfish_session_user_id">&nbsp;</a></li>
                            <li class="btns"><a href="#ax" class="AXButton" id="logoutButton"><i class="axi axi-power-off"></i> Logout</a></li>
                        </ul>
                        <div class="mx-loginfo"><a id="mx-loginfo-handle" class="mx-menu-button"><i class="axi axi-bars"></i></a></div>
                    </div>
                </div>
                <div class="ax-clear"></div>
            </div>
        </div>
    </div>
    <div class="H60"></div>
    <!-- ax-header : include -->

    <div class="ax-body">
        <div class="ax-wrap">
            <div class="ax-layer ax-title">
                <div class="ax-col-12 ax-content">
                    <h1>Rockfish Service</h1>
                    <!-- <p class="desc">Rockfish Service</p> -->
                </div>
                <div class="ax-clear"></div>
            </div>
            <div class="ax-layer">
                <div class="ax-col-12 ax-content">
                        
                    <!-- s.CXPage -->
                    <div id="CXPage">
                        <div class="ax-layer">
                            <div class="ax-col-12">
                                <div class="ax-unit">
                                    <div class="ax-box">

                                        <div class="ax-search" id="page-search-box"></div>
                                        <div class="ax-button-group">
                                            <div class="right">
                                                <button type="button" class="AXButton Blue" id="ax-search-btn-search">Search</button>
                                            </div>
                                            <div class="ax-clear"></div>
                                        </div>
                                        <div class="ax-grid" id="page-grid-box"></div>
                                        <div class="ax-button-group">
                                            <div class="ax-align-center">
                                                <button type="button" class="AXButtonLarge W50 Blue" id="ax-grid-btn-regist">
                                                    <i class="axi axi-plus-circle"></i> Add
                                                </button>
                                                <button type="button" class="AXButtonLarge W50" id="ax-grid-btn-remove">
                                                    <i class="axi axi-minus-circle"></i>
                                                    Del</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="ax-clear"></div>
                        </div>
                    </div>
                    <!-- e.CXPage -->                   
                        
                </div>
                <div class="ax-clear"></div>
            </div>
        </div>
    </div>
    <!-- e ax-body -->

    <!-- ax-left : include -->
    <div class="ax-aside">
        <div class="ax-layer ax-aside-menu-box">
            <a class="ax-aside-menu"><i class="axi axi-angle-double-right fa-lg"></i><i class="axi axi-angle-double-left fa-lg"></i></a>
        </div>
        <div class="ax-layer ax-aside-box">
            <div class="ax-unit">
                <div class="ax-box">
                    <h3>MENU</h3>
                    <ul class="ax-aside-ul" id="ax-aside-ul"></ul>
                </div>
            </div>
        </div>
    </div>
    <!-- ax-left : include -->

    <!-- ax-footer : include -->
    <div class="ax-footer">
        <div class="ax-wrap">
            <div class="ax-col-6">
                <div class="ax-unit">
                    <ul class="ax-version">
                        <li><a href="https://github.com/devsunset/rockfish" target="_blank"><i class="axi axi-github-square"></i>Rockfish Console</a></li>
                        <li><i class="axi axi-check-circle-o"></i> ver. 0.1</li>
                        <li><select id="theme-select"></select></li>
                    </ul>
                </div>
            </div>
            <div class="ax-col-6">
                <div class="ax-unit">
                    <ul class="ax-funcs">
                        <li>logo Icons made by <a href="http://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></li>
                        <li><a href="https://www.axisj.com" target="_blank"><i class="axi axi-axisj"></i> AXISJ.com</a></li>
                        <li><a href="https://github.com/axisj" target="_blank"><i class="axi axi-github-square"></i> AXISJ gitHub</a></li>
                        <li><a href="https://www.facebook.com/axisj" target="_blank"><i class="axi axi-facebook-square"></i> Facebook</a></li>
                    </ul>
                </div>
            </div>
            <div class="ax-clear"></div>
        </div>
    </div>   
    <!-- ax-footer : include -->
</div>
<script type="text/javascript">
    var page_menu_id = "m04"; // admin.js > topMenu_data 에 정의된 id
</script>
<script type="text/javascript">
    var fnObj = {
        pageStart: function(){
            //Session Check
            var url = '/console/sessionCheck'
            var pars = new Object();
             new AXReq(url, {debug:false,type: "post", pars:pars, onsucc:function(res){
                    if(res.rockfish_result_code == "S"){
                        $("#rockfish_session_user_id").html(res.rockfish_result_data.user_name);
                    }else{
                       AXUtil.alert("Session is invalid or Session is time out.");
                       document.location.href="/login.html";
                    }
                },
                onerr:function(res){
                    toast.push("Session Check Error.");
                }
            });

            $('#logoutButton').click(function(){
                if(AXUtil.confirm('Do you want log out ?')){
                    var url = "/console/logout";
                    var pars = new Object();
                    new AXReq(url, {debug:false,type: "post", pars:pars, onsucc:function(res){
                           document.location.href="login.html";
                        },
                        onerr:function(res){
                            AXUtil.alert("Log out process error");
                        }
                    });
                }
            });     
            
            this.search.bind();
            this.grid.bind();
            this.modal.bind();
            this.bindEvent();
        },
        bindEvent: function(){
            var _this = this;
            axdom("#ax-search-btn-search").bind("click", function(){
                _this.search.submit();
            });
        },
        search: {
            target: new AXSearch(),
            get: function(){ return this.target },
        bind: function(){
                var _this = this;
                this.target.setConfig({
                    targetID:"page-search-box",
                    theme : "AXSearch",
                    mediaQuery: {
                        mx:{min:0, max:767}, dx:{min:767}
                    },
                    onsubmit: function(){
                        // 버튼이 선언되지 않았거나 submit 개체가 있는 경우 발동 합니다.
                    },
                    rows:[
                        {display:true, addClass:"gray", style:"", list:[
                            {label:"APP", labelWidth:"100", type:"inputText", width:"220", key:"SERVICE_APP", addClass:"", valueBoxStyle:"", value:""},
                            {label:"SERVICE", labelWidth:"100", type:"inputText", width:"220", key:"SERVICE", addClass:"secondItem", valueBoxStyle:"", value:""},
                            {label:"TITLE", labelWidth:"100", type:"inputText", width:"220", key:"SERVICE_TITLE", addClass:"secondItem", valueBoxStyle:"", value:""}
                        ]},
                        {display:true, addClass:"", style:"", list:[
                           {label:"TYPE", labelWidth:"100", type:"selectBox", width:"230", key:"SERVICE_TYPE", addClass:"", valueBoxStyle:"", value:"",
                                options:[{optionValue:"", optionText:"ALL"}, {optionValue:"G", optionText:"General"}, {optionValue:"M", optionText:"Multipart"}, {optionValue:"D", optionText:"Download"}],
                                AXBind:{
                                    type:"select", config:{
                                        onChange:function(){
                                            //toast.push(Object.toJSON(this));
                                        }
                                    }
                                }
                            },  
                            {label:"STATUS", labelWidth:"100", type:"selectBox", width:"230", key:"selectbox", addClass:"secondItem", valueBoxStyle:"", value:"",
                                options:[{optionValue:"", optionText:"ALL"}, {optionValue:"Y", optionText:"Y"}, {optionValue:"N", optionText:"N"}],
                                AXBind:{
                                    type:"select", config:{
                                        onChange:function(){
                                            //toast.push(Object.toJSON(this));
                                        }
                                    }
                                }
                            },                           
                        ]},
                        {display:true, addClass:"gray", style:"", list:[
                            {label:"DESC", labelWidth:"100", type:"inputText", width:"220", key:"SERVICE_DESC", addClass:"", valueBoxStyle:"", value:""},
                            {label:"URL", labelWidth:"100", type:"inputText", width:"220", key:"SERVICE_URL", addClass:"secondItem", valueBoxStyle:"", value:""}
                        ]},
                        {display:false, addClass:"", style:"", list:[
                           {label:"PROTOCOL", labelWidth:"100", type:"selectBox", width:"230", key:"SERVICE_PROTOCOL", addClass:"", valueBoxStyle:"", value:"HTTP",
                                options:[{optionValue:"HTTP", optionText:"HTTP"}],
                                AXBind:{
                                    type:"select", config:{
                                        onChange:function(){
                                            //toast.push(Object.toJSON(this));
                                        }
                                    }
                                }
                            },  
                            {label:"METHOD", labelWidth:"100", type:"selectBox", width:"230", key:"SERVICE_METHOD", addClass:"secondItem", valueBoxStyle:"", value:"POST",
                                options:[{optionValue:"POST", optionText:"POST"}],
                                AXBind:{
                                    type:"select", config:{
                                        onChange:function(){
                                            //toast.push(Object.toJSON(this));
                                        }
                                    }
                                }
                            },                           
                        ]},
                        {display:false, addClass:"gray", style:"", list:[
                            {label:"REG DATE", labelWidth:"", type:"inputText", width:"100", key:"REG_DATE1", addClass:"", valueBoxStyle:"", value:"",
                                onChange: function(){}
                            },
                            {label:"", labelWidth:"", type:"inputText", width:"100", key:"REG_DATE2", addClass:"secondItem", valueBoxStyle:"padding-left:0px;", value:"",
                                AXBind:{
                                    type:"twinDate", config:{
                                        align:"right", valign:"top", startTargetID:"REG_DATE1",
                                        onChange:function(){
                                            //toast.push(Object.toJSON(this));
                                        }
                                    }
                                }
                            },
                            {label:"MOD DATE", labelWidth:"", type:"inputText", width:"100", key:"MOD_DATE1", addClass:"secondItem", valueBoxStyle:"", value:"",
                                onChange: function(){}
                            },
                            {label:"", labelWidth:"", type:"inputText", width:"100", key:"MOD_DATE2", addClass:"secondItem", valueBoxStyle:"padding-left:0px;", value:"",
                                AXBind:{
                                    type:"twinDate", config:{
                                        align:"right", valign:"top", startTargetID:"MOD_DATE1",
                                        onChange:function(){
                                            //toast.push(Object.toJSON(this));
                                        }
                                    }
                                }
                            },                         
                        ]}
                    ]
                });
            },
            submit: function(){
                var pars = this.target.getParam();
                toast.push("콘솔창에 파라미터 정보를 출력하였습니다.");
                trace(pars);
            }
        },
        grid: {
            target: new AXGrid(),
            get: function(){ return this.target },
            bind: function(){

                this.target.setConfig({
                    targetID : "page-grid-box",
                    theme : "AXGrid",
                    mediaQuery: {
                        mx:{min:0, max:767}, dx:{min:767}
                    },
                    fixedColSeq: 3,
                    colGroup : [
                        {key:"no", label:"", width:"30", align:"center", formatter:"checkbox"},
                        {key:"SERVICE_APP", label:"App", width:"150"},
                        {key:"SERVICE", label:"Service", width:"250"},
                        {key:"SERVICE_TITLE", label:"Title", width:"250"},
                        {key:"SERVICE_URL", label:"Url", width:"450"},
                        {key:"SERVICE_TYPE", label:"Type", width:"150"},
                        {key:"SERVICE_STATUS", label:"Status", width:"60"},                        
                        {key:"SERVICE_PROTOCOL", label:"Protocol", width:"70"},
                        {key:"SERVICE_METHOD", label:"Method", width:"60"},
                        {key:"SERVICE_DESC", label:"Desc", width:"200"},
                        {key:"REG_DATE", label:"Reg Date", width:"120", align:"center"},
                        {key:"MOD_DATE", label:"Mod Date", width:"120", align:"center"},
                    ],
                    body : {
                        onclick: function(){
                            //toast.push(Object.toJSON({index:this.index, item:this.item}));
                            //alert(this.list);
                            //alert(this.page);
                            fnObj.modal.open("gridView", this.item);
                        }
                    },
                    page:{
                        paging:true,
                        pageNo:1,
                        pageSize:100,
                        status:{formatter: null}
                    }
                });

                this.target.setList({
                    ajaxUrl:"data/loadGrid.json", method:"GET", ajaxPars:"param1=1&param2=2", onLoad:function(){
                        //trace(this);
                    }
                });
            }
        },
        modal: {
            target: new AXModal(),
            get: function(){ return this.target },
            bind: function(){
                window.myModal = this.target;
                this.target.setConfig({
                    windowID:"myModalContainer",
                    mediaQuery: {
                        mx:{min:0, max:767}, dx:{min:767}
                    },
                    displayLoading:true
                });
            },
            open: function(type, item){
                this.target.open({
                    method:"GET",
                    url:"service_modal.html",
                    pars:"a=1&b=2&c=3".queryToObject(),
                    top:100, width:600,
                    closeByEscKey:true
                });
            }
        }
    };
</script>
</body>
</html>