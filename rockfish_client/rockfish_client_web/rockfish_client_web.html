<!--
/*■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■*/
/* filename : rockfish_client_web.html
/* author 	: devsunset (devsunset@gmail.com)
/* desc   	: rockfish client (web sample)
/*■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■*/
-->
<html>
	<title>rockfish_client_web</title>
	<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<script  src="http://code.jquery.com/jquery-latest.min.js"></script>
	<script  src="jsencrypt.js"></script>
	<script  src="rockfish_client_web.js"></script>

	<script>
	$(document).ready(function() {

		// Use sample
	   $("#send").click(function(e) {

	   		// Login시 cookie 값에 rockfish_access_id 설정
	   		rockfishSetCookie("rockfish_access_id",rockfishRsaEncrypt("rockfish"));

			// Form value
			var formData = $("#sendForm").serializeArray();

			// User defined value or hidden value setting
			var param = new Object();
			param.name="user_defined_value";
			param.value="123";
			formData.push(param);

			/**
			 * <pre>
			 * rockfish ajax Common call function
			 * </pre>
			 * @param service : 호출 service target
			 * @param data : 호출 parameter
			 * @param encdata : 암호화 설정 값
			 *					 ROCKFISH_PARAMETER_PLAIN (전체 평문)
			 *					 ROCKFISH_PARAMETER_ENCRYPT (전체 암호화)
			 *					 Array() field value (암호화 하고자 하는 field)
			 * @param callback : success callback 함수
			 * @param errorcallback : error callback 함수
			 * @param loadingbar : 공통으로 progress bar 등을 사용하는 경우 호출 Action에 따라 표시 유무 설정
			 * @param async : 동기화 여부 설정 기본은 true
			 * @param attachField : 첨부파일 Array Field
			 * @param attachFile : 첨부파일 Array Object
			 *
			 * ■■■ TO-DO 표시 항목에 대해서는 사용자가 요건에 맞게 정의 하여 사용 ■■■
			 *
			 */

			// encrypt field
			var encArray = new Array();
			encArray.push("single");
			encArray.push("multiple");

			// attach file
			var attachField = new Array();
			var attachFile = new Array();
			// 파일이 선택 된 경우에만  attachFile 에 값을 설정
			if( Object.prototype.toString.call($("input[name=uploadfile]")[0].files[0]) === '[object File]' ){
				attachField.push("uploadfile");
				attachFile.push($("input[name=uploadfile]")[0].files[0]);
			}

			if( Object.prototype.toString.call($("input[name=uploadfilesub]")[0].files[0]) === '[object File]' ){
				attachField.push("uploadfilesub");
				attachFile.push($("input[name=uploadfilesub]")[0].files[0]);
			}

			rockfishAjax("ROCKFISH", formData, encArray, function(response){
			      // [정상 - 로직 구현]
			      //alert(JSON.stringify(response));
			      $("#result").val(JSON.stringify(response));
				  alert("success");
			    },function(status,error){
			      // [에러 - 로직 구현]
			    	alert(status +" : "+error);
			    }
			    ,true  // 공통 progress 사용시 표시 여부 설정
			    ,true  // async 여부 설정 생략 가능 default async true
			    ,attachField
				,attachFile
			  );
		});

	});
	</script>
	</head>
	<body>
		<h1> --------------------------------------</h1>
		<h1> ROCKFISH CLIENT WEB SAMPLE </h1>
		<h1> --------------------------------------</h1>
		<form id="sendForm">
		 <input type="text" name="text" value="text" id="text">
		 <p>
			  <select NAME="single">
			    <option VALUE="single1">single1</option>
			    <option VALUE="single2">single2</option>
			  </select>
		  <p>
			  <select name="multiple" multiple="multiple">
			    <option value="multiple1" selected="selected">multiple1</option>
			    <option value="multiple2">multiple2</option>
			    <option value="multiple3" selected="selected">multiple3</option>
			  </select>
		  <p>
			  <input type="checkbox" name="check" value="check1" id="ch1">
			  <label for="ch1">check1</label>
			  <input type="checkbox" name="check" value="check2" checked="checked" id="ch2">
			  <label for="ch2">check2</label>
		  <p>
			  <input type="radio" name="radio" value="radio1" checked="checked" id="r1">
			  <label for="r1">radio1</label>
			  <input type="radio" name="radio" value="radio2" id="r2">
			  <label for="r2">radio2</label>

		  <p>
		  <input type="file" name="uploadfile" />
		  <input type="file" name="uploadfilesub" />
		</form>
		<h1> --------------------------------------</h1>
		<button id="send" value="Send">Send</button><p>
		<h1> --------------------------------------</h1>
		<textarea id="result" rows=10 cols=70></textarea>
	</body>
</html>